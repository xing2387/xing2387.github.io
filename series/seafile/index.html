<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>seafile | xing2387.github.io</title><meta name=keywords content><meta name=description content="xing2387's blog"><meta name=author content="Me"><link rel=canonical href=https://xing2387.github.io/series/seafile/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.d9015f4cb657fd3539b79b29ffbd11de4175ccd105ad7591beffaadfafb48488.css integrity="sha256-2QFfTLZX/TU5t5sp/70R3kF1zNEFrXWRvv+q36+0hIg=" rel="preload stylesheet" as=style><link rel=icon href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.68.3"><link rel=alternate type=application/rss+xml href=https://xing2387.github.io/series/seafile/index.xml><meta property="og:title" content="seafile"><meta property="og:description" content="xing2387's blog"><meta property="og:type" content="website"><meta property="og:url" content="https://xing2387.github.io/series/seafile/"><meta property="og:image" content="https://xing2387.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="xing2387"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xing2387.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="seafile"><meta name=twitter:description content="xing2387's blog"></head><body class=list id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: #1d1e20;--entry: #2e2e33;--primary: rgba(255, 255, 255, 0.84);--secondary: rgba(255, 255, 255, 0.56);--tertiary: rgba(255, 255, 255, 0.16);--content: rgba(255, 255, 255, 0.74);--hljs-bg: #2e2e33;--code-bg: #37383e;--border: #333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://xing2387.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://xing2387.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://xing2387.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://example.org title=example.org><span>example.org</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://xing2387.github.io/>Home</a></div><h1>seafile</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>[seafile-selfbuild] 5. 设置开机启动(bananapro+lubuntu16.04)</h2></header><section class=entry-content><p>开机启动 启动脚本
/root/bin/restartSeafile.sh 文件：
#! /bin/bash #杀存在的进程 pkill seaf-server ps -ef |grep seahub | awk '{print $2}' | xargs kill -9 #等mysql可用，启动seafile-server i=0 while [ $i -le 10 ]; do sleep 3; if [[ -e /var/run/mysqld/mysqld.sock ]]; then /usr/local/bin/seaf-server -c /root/dev/conf -d /root/dev/seafile-data -D all -f & break; fi let i=$i+1; done sleep 2 #启动seahub，要等一两分钟才能起来 export PYTHONPATH=/home/bananapi/.local/lib/python3.6/site-packages/:/usr/local/lib/python3.6/site-packages/:/root/dev/source-code/seahub/thirdpart:$PYTHONPATH export CCNET_CONF_DIR=/root/dev/conf export SEAFILE_CONF_DIR=/root/dev/seafile-data export SEAFILE_CENTRAL_CONF_DIR=/root/dev/conf python3 /root/dev/source-code/seahub/manage.py runserver 0.0.0.0:8000 & /root/bin/stopSeafile....</p></section><footer class=entry-footer>July 1, 2021&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [seafile-selfbuild] 5. 设置开机启动(bananapro+lubuntu16.04)" href=https://xing2387.github.io/posts/seafile/5.-%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>[seafile-selfbuild] 4. FUSE extension文档</h2></header><section class=entry-content><p>FUSE extension 编译seafile-server的时候，去掉configure的–disable-fuse参数，会多个seaf-fuse文件。
官方文档 https://github.com/haiwen/seafile-admin-docs/blob/master/manual/extension/fuse.md
Files in the seafile system are split to blocks, which means what are stored on your seafile server are not complete files, but blocks. This design faciliates effective data deduplication.
However, administrators sometimes want to access the files directly on the server. You can use seaf-fuse to do this.
seaf-fuse is an implementation of the FUSE virtual filesystem. In a word, it mounts all the seafile files to a folder (which is called the ‘‘‘mount point’''), so that you can access all the files managed by seafile server, just as you access a normal folder on your server....</p></section><footer class=entry-footer>July 1, 2021&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [seafile-selfbuild] 4. FUSE extension文档" href=https://xing2387.github.io/posts/seafile/4.-fuse-extension/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>[seafile-selfbuild] 3. 安装编译好的服务端(bananapro+lubuntu16.04)</h2></header><section class=entry-content><p>bananapro - lubuntu16.04 安装 使用 “docker 编译arm版” 编译好的文件安装 tar -zxf seafile_arm_install.tar.gz #得到usr目录 sudo cp -r usr / 安装依赖包 apt-get install -y ssh libevent-dev libcurl4-openssl-dev libglib2.0-dev uuid-dev intltool libsqlite3-dev libmysqlclient-dev libarchive-dev libtool libjansson-dev valac libfuse-dev python-dateutil cmake re2c flex sqlite3 python-pip python-simplejson git libssl-dev libldap2-dev libonig-dev vim vim-scripts wget cmake gcc autoconf automake mysql-client librados-dev libxml2-dev curl sudo telnet netcat unzip netbase ca-certificates apt-transport-https build-essential libxslt1-dev libffi-dev libpcre3-dev libz-dev xz-utils nginx pkg-config poppler-utils libmemcached-dev sudo 忽略安装nginx的错误...</p></section><footer class=entry-footer>July 1, 2021&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [seafile-selfbuild] 3. 安装编译好的服务端(bananapro+lubuntu16.04)" href=https://xing2387.github.io/posts/seafile/3.-bananapro-lubuntu16.04%E5%AE%89%E8%A3%85%E7%BC%96%E8%AF%91%E5%A5%BD%E7%9A%84seafile/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>[seafile-selfbuild] 2. seafile-selfbuild: docker下编译arm版</h2></header><section class=entry-content><p>docker 编译arm版 docker运行arm镜像 安装qemu：
sudo apt install qemu-user-static 下载并运行镜像：
docker run -itd --name seafileArm arm32v7/ubuntu:18.04 docker container update --cpuset-cpus="0,1,2,3,4,5,6,7" seafileArm docker container update -m 8g seafileArm docker stop seafileArm docker start seafileArm && docker attach seafileArm docker container修改ip
#创建网段 sudo docker network create --subnet 172.18.0.0/24 --gateway 172.18.0.1 mynet #将container添加到这个网段并设置ip docker network connect --ip=172.18.0.2 mydockernet seafileArm #删除container默认的ip docker network disconnect bridge seafileArm 照 “offcial build guide” ，在docker下编译。 编译好后，修改安装路径，得到要安装的文件...</p></section><footer class=entry-footer>July 1, 2021&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [seafile-selfbuild] 2. seafile-selfbuild: docker下编译arm版" href=https://xing2387.github.io/posts/seafile/2.-docker%E7%BC%96%E8%AF%91arm%E7%89%88/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>[seafile-selfbuild] 1. official build guide</h2></header><section class=entry-content><p>official build guide https://github.com/haiwen/seafile-admin-docs/blob/master/manual/build_seafile/server.md
8.0.0版
This is the document for deploying Seafile open source development environment in Ubuntu 1804 docker container.
Run a container docker run -it -p 8000:8000 -p 8082:8082 -p 3000:3000 --name seafile-ce-env ubuntu:18.04 bash Note, the following commands are all executed in the seafile-ce-env docker container.
Update Source and Install Dependencies. apt-get update && apt-get upgrade -y apt-get install -y ssh libevent-dev libcurl4-openssl-dev libglib2.0-dev uuid-dev intltool libsqlite3-dev libmysqlclient-dev libarchive-dev libtool libjansson-dev valac libfuse-dev python-dateutil cmake re2c flex sqlite3 python-pip python-simplejson git libssl-dev libldap2-dev libonig-dev vim vim-scripts wget cmake gcc autoconf automake mysql-client librados-dev libxml2-dev curl sudo telnet netcat unzip netbase ca-certificates apt-transport-https build-essential libxslt1-dev libffi-dev libpcre3-dev libz-dev xz-utils nginx pkg-config poppler-utils libmemcached-dev sudo curl -sL &lt;https://deb....</p></section><footer class=entry-footer>July 1, 2021&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [seafile-selfbuild] 1. official build guide" href=https://xing2387.github.io/posts/seafile/1.-official-build-guide/></a></article></main><footer class=footer><span>&copy; 2021 <a href=https://xing2387.github.io/>xing2387.github.io</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></button></a>
<script>let menu=document.getElementById('menu')
menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>