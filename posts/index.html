<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | xing2387.github.io</title><meta name=keywords content><meta name=description content="xing2387's blog"><meta name=author content="Me"><link rel=canonical href=https://xing2387.github.io/posts/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.d9015f4cb657fd3539b79b29ffbd11de4175ccd105ad7591beffaadfafb48488.css integrity="sha256-2QFfTLZX/TU5t5sp/70R3kF1zNEFrXWRvv+q36+0hIg=" rel="preload stylesheet" as=style><link rel=icon href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://xing2387.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.68.3"><link rel=alternate type=application/rss+xml href=https://xing2387.github.io/posts/index.xml><meta property="og:title" content="Posts"><meta property="og:description" content="xing2387's blog"><meta property="og:type" content="website"><meta property="og:url" content="https://xing2387.github.io/posts/"><meta property="og:image" content="https://xing2387.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="xing2387"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xing2387.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Posts"><meta name=twitter:description content="xing2387's blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://xing2387.github.io/posts/"}]}</script></head><body class=list id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: #1d1e20;--entry: #2e2e33;--primary: rgba(255, 255, 255, 0.84);--secondary: rgba(255, 255, 255, 0.56);--tertiary: rgba(255, 255, 255, 0.16);--content: rgba(255, 255, 255, 0.74);--hljs-bg: #2e2e33;--code-bg: #37383e;--border: #333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://xing2387.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://xing2387.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://xing2387.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://example.org title=example.org><span>example.org</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://xing2387.github.io/>Home</a></div><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>[port-ffmpeg-to-Android] 交叉编译Android下的ffmpeg</h2></header><section class=entry-content><p>状态： 编译成功了，但还没验证得到的动态库是否正常可用。后面再更新。 下载ffmpeg源码 ffmpeg-4.4.tar.gz
Android ABI
ABI 支持的指令集 备注 armeabi-v7a armeabi等 与 ARMv5/v6 设备不兼容。 arm64-v8a AArch64 x86 x86 (IA-32)等 不支持 MOVBE 或 SSE4。 arm64-v8a x86-64等 编译脚本
修改B站ijkplayer的compile-ffmpeg.sh得到。
见末尾 build_ffmpeg.sh文件
改动：
修改源码的目录结构，让各个平台共用一份代码。ijk是各个abi各自一份源码ffmpeg-${abi}，这比较独立。但是我想可能各个平台的公共代码比较多？独立的话，如果要修改源码就要同步修改各个平台的，虽然可以用软链接解决问题，但是先共用一份吧，目前先不管多平台的适配。
修改编译输出的目录结构，在源码下新建个build目录，各个平台的输出就是build/ffmpeg-${abi}。
修改生成的standalone toolchain目录，为build/toolchains/ffmpeg-${abi}。
更新ffmpeg和ndk版本，用了目前最新的4.4版本，按B站ijk的ndk14-android9编译会失败，更新成了ndk20-android21。
修改编译的so库名字为libandroidffmpeg....</p></section><footer class=entry-footer>July 5, 2021&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [port-ffmpeg-to-Android] 交叉编译Android下的ffmpeg" href=https://xing2387.github.io/posts/androidffmpeg/port-ffmpeg-to-android/></a></article><article class=post-entry><header class=entry-header><h2>[gnu-automake-manual] 2.4. Hello World</h2></header><section class=entry-content><p>2.4.1 创建 amhello-1.0.tar.gz 只有5个文件：
~/amhello % tree . ├── configure.ac ├── Makefile.am ├── README └── src ├── main.c └── Makefile.am 1 directory, 5 files src/main.c
#include &lt;config.h>#include &lt;stdio.h>int main (void) { puts ("Hello World!"); puts ("This is " PACKAGE_STRING "."); return 0; } README
This is a demonstration package for GNU Automake. Type 'info Automake' to read the Automake manual. src/Makefile.am
bin_PROGRAMS = hello hello_SOURCES = main....</p></section><footer class=entry-footer>July 2, 2021&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [gnu-automake-manual] 2.4. Hello World" href=https://xing2387.github.io/posts/automake/2.4-hello-world/></a></article><article class=post-entry><header class=entry-header><h2>[gnu-automake-manual] 2.2. Use Cases</h2></header><section class=entry-content><p>为了适应不同系统环境下的编译，需要有.configure命令：run ./configure && make && make install
2.2 Use Cases 2.2.2 make 的目标(targets) 命令 make check Run the test suite, if any. make installcheck Check the installed programs or libraries, if supported. make distclean Additionally erase anything ./configure created. make dist Recreate package-version.tar.gz from all the source files. 2.2.3 目录变量 部分变量：
Directory variable Default value prefix /usr/local exec_prefix ${prefix} bindir ${exec_prefix}/bin libdir ${exec_prefix}/lib includedir ${prefix}/include datarootdir ${prefix}/share datadir ${datarootdir} mandir ${datarootdir}/man infodir ${datarootdir}/info docdir ${datarootdir}/doc/${PACKAGE} 使用： ....</p></section><footer class=entry-footer>July 2, 2021&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [gnu-automake-manual] 2.2. Use Cases" href=https://xing2387.github.io/posts/automake/2.2.-use-cases/></a></article><article class=post-entry><header class=entry-header><h2>[gnu-automake-manual] 1. forward</h2></header><section class=entry-content><p>gnu automake manual</p></section><footer class=entry-footer>July 2, 2021&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [gnu-automake-manual] 1. forward" href=https://xing2387.github.io/posts/automake/1.-forward/></a></article><article class=post-entry><header class=entry-header><h2>[seafile-selfbuild] 5. 设置开机启动(bananapro+lubuntu16.04)</h2></header><section class=entry-content><p>开机启动 启动脚本
/root/bin/restartSeafile.sh 文件：
#! /bin/bash #杀存在的进程 pkill seaf-server ps -ef |grep seahub | awk '{print $2}' | xargs kill -9 #等mysql可用，启动seafile-server i=0 while [ $i -le 10 ]; do sleep 3; if [[ -e /var/run/mysqld/mysqld.sock ]]; then /usr/local/bin/seaf-server -c /root/dev/conf -d /root/dev/seafile-data -D all -f & break; fi let i=$i+1; done sleep 2 #启动seahub，要等一两分钟才能起来 export PYTHONPATH=/home/bananapi/.local/lib/python3.6/site-packages/:/usr/local/lib/python3.6/site-packages/:/root/dev/source-code/seahub/thirdpart:$PYTHONPATH export CCNET_CONF_DIR=/root/dev/conf export SEAFILE_CONF_DIR=/root/dev/seafile-data export SEAFILE_CENTRAL_CONF_DIR=/root/dev/conf python3 /root/dev/source-code/seahub/manage.py runserver 0.0.0.0:8000 & /root/bin/stopSeafile....</p></section><footer class=entry-footer>July 1, 2021&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to [seafile-selfbuild] 5. 设置开机启动(bananapro+lubuntu16.04)" href=https://xing2387.github.io/posts/seafile/5.-%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://xing2387.github.io/posts/page/2/>Next Page »</a></nav></footer></main><footer class=footer><span>&copy; 2021 <a href=https://xing2387.github.io/>xing2387.github.io</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></button></a>
<script>let menu=document.getElementById('menu')
menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>